#cloud-config

# On first boot, set the (default) pix user's password to "pix" and
# expire user passwords
chpasswd:
  expire: true
  users:
    - name: pix
      password: pix
      type: text

## Set the system's hostname. Please note that, unless you have a local DNS
## setup where the hostname is derived from DHCP requests (as with dnsmasq),
## setting the hostname here will not make the machine reachable by this name.
## You may also wish to install avahi-daemon (see the "packages:" key below)
## to make your machine reachable by the .local domain
hostname: pixx
create_hostname_file: true

# Enable password authentication with the SSH daemon
ssh_pwauth: true

users:
- default
- name: pix
  plain_text_passwd: 'pix'
  homedir: /home/pix
  shell: /bin/bash
  groups: [adm, audio, cdrom, dialout, dip, floppy, input, lxd, netdev, plugdev, realtime, sudo, video]
  sudo: ['ALL=(ALL) NOPASSWD:ALL']


## Run arbitrary commands at rc.local like time
runcmd:
-  [deluser, --remove-home, ubuntu]
-  [/sbin/ldconfig]
-  [/usr/bin/chown, pix:pix, -R, /opt/pixx_ws]
-  [/bin/bash, /opt/pixx_ws/pixx_scripts/wifi.sh]
-  [/bin/bash, /opt/pixx_ws/pixx_scripts/install_vscode_server.sh, pix]